version: "3"
services:
  api-1:
    build: 
      context: ./subgraph-1
    volumes:
      - ./subgraph-1:/api
    environment:
      NODE_ENV: development
      PG_CONNECTION_STRING: postgres://postgres:postgrespassword@host.docker.internal:7432/postgres 
      PORT: 8000
    ports: ['9080:8000'] 
  api-2:
    build: 
      context: ./subgraph-2
    volumes:
      - ./subgraph-2:/api
    environment:
      NODE_ENV: development
      PG_CONNECTION_STRING: postgres://postgres:postgrespassword@host.docker.internal:8432/postgres 
      PORT: 8000
    ports: ['9090:8000']